(this["webpackJsonpdistributor-front"]=this["webpackJsonpdistributor-front"]||[]).push([[0],{1043:function(e,t,n){},1045:function(e,t,n){},1414:function(e,t){},1416:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),a=n(63),s=n.n(a),r=(n(765),n(49)),l=n(52),o=n(61),d=n(60),u=(n.p,n(766),n(82)),h=n.n(u),j=(n(784),n(785),n(786),n(1415),n(1036),n(1037),n(70)),b=n.n(j),f=n(1428),p=n(320),g="/api/v1/tickets",O="/api/v1/tickets/encours/",x=n(91),y=n(9),m=f.a.RangePicker,k=(p.a.Option,c.a.Component,n(25)),v=n(72),T=n(1431),S=n(1422),w=n(1423),F=n(1430),C=n(1432),R=n(321),D=n(1436),E=n(736),P=n(110),N=n(744),I=n(1438),z=n(1439),A=(n(1043),n(55)),M=n(156),L=n(96),U=Object(L.b)({name:"signin",initialState:{fetchSigninResult:null,fetchSigninError:null,isFetchingSignin:!1,redirectToDashboard:!1},reducers:{initSignin:function(e,t){e.fetchSigninResult=null,e.isFetchingSignin=!1,e.fetchSigninError=null,e.redirectToDashboard=!1},setSigninResult:function(e,t){e.fetchSigninResult=t.payload,e.isFetchingSignin=!1,e.redirectToDashboard=!0},setSigninError:function(e,t){e.fetchSigninError=t.payload,e.isFetchingSignin=!1},setFetchingSignin:function(e,t){e.isFetchingSignin=t.payload}}}),H=U.actions,_=H.setSigninResult,Z=H.setSigninError,K=H.setFetchingSignin,B=H.initSignin,V=function(e){return function(t,n){var i={method:"post",url:"/api/v1/users/login",headers:{"Content-Type":"application/json"},data:e};return t(K(!0)),h()(i).then((function(e){localStorage.setItem("token",e.data.accessJWT),console.log("token",e.data.accessJWT),t(_(e.data))})).catch((function(e){t(Z(e.message))})).data}},W=U.reducer,q=Object(L.b)({name:"dashboard",initialState:{fetchProfileResult:null,fetchProfileError:null,isFetchingProfile:!1,value:2,pathname:"/",token:localStorage.token},reducers:{setPathname:function(e,t){e.pathname=t.payload},setProfileResult:function(e,t){e.fetchProfileResult=t.payload,e.isFetchingProfile=!1},setProfileError:function(e,t){e.fetchProfileError=t.payload,e.isFetchingProfile=!1},setFetchingProfile:function(e,t){e.isFetchingProfile=t.payload}}}),J=q.actions,G=J.setPathname,Y=J.setProfileResult,$=J.setProfileError,Q=J.setFetchingProfile,X=q.reducer,ee=n.p+"static/media/4428859.e1223b80.svg",te=(T.a.Title,T.a.Paragraph,T.a.Text,Object(y.jsx)(M.a,{style:{fontSize:24},spin:!0})),ne=function(){var e=c.a.useState({email:"",password:"",remember:!1}),t=Object(v.a)(e,2),n=t[0],i=t[1],a=Object(A.b)(),s=Object(A.c)((function(e){return e.signin.fetchSigninError})),r=Object(A.c)((function(e){return e.signin.fetchSigninResult}));console.log("signInResult",r);var l=Object(A.c)((function(e){return e.signin.isFetchingSignin}));Object(A.c)((function(e){return e.signin.redirectToDashboard}));c.a.useEffect((function(){a(B())}),[]);var o=function(e){console.log(e.keyCode),null!==s&&a(Z(null)),13===e.keyCode&&a(V(n))};return"assistantDz"===(null===r||void 0===r?void 0:r.userType)?Object(y.jsx)(x.Redirect,{to:"/dashboard/tickets/pending"}):"assistantFr"===(null===r||void 0===r?void 0:r.userType)?Object(y.jsx)(x.Redirect,{to:"/dashboard/tickets"}):Object(y.jsxs)(S.a,{justify:"center",align:"middle",style:{height:"100vh"},children:[Object(y.jsx)(w.a,{xs:12,style:{padding:"0px 128px 128px 128px"},children:Object(y.jsx)(N.a.div,{initial:{y:10},animate:{y:[-10.55,-10.3],x:[-10,10,-10,0]},transition:{duration:1,repeat:0,type:"spring"},children:Object(y.jsxs)("div",{style:{marginLeft:"20%",marginRight:"20%",marginTop:"30%",minHeight:"50vh",Display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(y.jsx)("img",{src:"https://gw.alipayobjects.com/zos/antfincdn/aPkFc8Sj7n/method-draw-image.svg",width:150,style:{alignSelf:"center",marginLeft:"30%",marginBottom:"20%"},className:"center"}),Object(y.jsx)("h3",{style:{marginBottom:32,marginLeft:30},children:"Connectez-vous!"}),Object(y.jsxs)(F.a,{name:"normal_login",className:"register-form",children:[Object(y.jsx)(F.a.Item,{name:"Email",rules:[{required:!0,message:"Please input your Email!"}],children:Object(y.jsx)(C.a,{value:n.email,onChange:function(e){return i(Object(k.a)(Object(k.a)({},n),{},{email:e.target.value}))},prefix:Object(y.jsx)(I.a,{className:"site-form-item-icon"}),placeholder:"Email",onKeyDown:o})}),Object(y.jsx)(F.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(y.jsx)(C.a.Password,{value:n.password,onChange:function(e){return i(Object(k.a)(Object(k.a)({},n),{},{password:e.target.value}))},onKeyDown:o,prefix:Object(y.jsx)(z.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(y.jsx)(F.a.Item,{children:Object(y.jsx)(F.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(y.jsx)(R.a,{children:"Remember me"})})}),s?Object(y.jsx)(F.a.Item,{children:Object(y.jsx)(D.a,{type:"error",message:"Incorrect Email Or Password",banner:!0})}):null,Object(y.jsx)(F.a.Item,{children:l?Object(y.jsx)(E.a,{indicator:te,children:Object(y.jsx)(P.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"},children:"Log in"})}):Object(y.jsx)(P.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"},onClick:function(e){a(V(n))},children:"Login"})})]})]})})}),Object(y.jsx)(w.a,{xs:12,style:{backgroundImage:"url(".concat(ee,")"),backgroundRepeat:"no-repeat",backgroundAttachment:"fixed",backgroundPosition:"right center",backgroundSize:"50%",height:"100vh",backgroundColor:"#01488f",boxShadow:"-7px 1px 26px -2px rgba(0,0,0,0.78)"}})]})},ie=n(501),ce=(n(1045),n(1425)),ae=n(247),se=n(1433),re=n(1435),le=n(1426),oe=n(747),de=n(741),ue=n(1442),he=n(1443),je=n(1444),be=n(1445),fe=n(1446),pe=n(131),ge=n(1437),Oe=n(748),xe=n(749),ye=n(1427),me=n(204),ke=n.n(me),ve=n(430),Te=n(750),Se=n(1440),we=n(433),Fe=n(84),Ce=n.n(Fe),Re=n(426),De=(n(227),Object(L.b)({name:"Tickets",initialState:{fetchTicketsResult:null,fetchTicketsError:null,isFetchingTickets:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setPathname:function(e,t){e.pathname=t.payload},setTicketsResult:function(e,t){e.fetchTicketsResult=t.payload,t.payload.nbreOfDocs&&(e.nbreOfDocs=t.payload.nbreOfDocs),e.isFetchingTickets=!1},setTicketsError:function(e,t){e.fetchTicketsError=t.payload,e.isFetchingTickets=!1},setFetchingTickets:function(e,t){t.payload&&(e.fetchTicketsError=null,e.fetchTicketsResult=null),e.isFetchingTickets=t.payload},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}})),Ee=De.actions,Pe=(Ee.setPathname,Ee.setTicketsResult),Ne=Ee.setTicketsError,Ie=Ee.setFetchingTickets,ze=(Ee.setFilters,Ee.setPage,function(e){return function(t,n){var i={method:"get",url:"/api/v1/tickets/ready",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return t(Ie(!0)),h()(i).then((function(e){t(Pe(e.data))})).catch((function(e){t(Ne(e.message))})).data}}),Ae=De.reducer,Me=n(152),Le=n.n(Me),Ue=n(116),He=n(167),_e=n.n(He),Ze=C.a.TextArea,Ke=function(e){var t=e.children,n=e.extra;return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("div",{className:"main",children:t}),Object(y.jsx)("div",{className:"extra",children:n})]})},Be=(f.a.RangePicker,function(){var e,t,n=Object(Ue.useHistory)(),a=Object(i.useState)({}),s=Object(v.a)(a,2),r=s[0],l=s[1],o=c.a.useEffect,d=Object(A.b)();o((function(){d(ze())}),[]);var u,j=Object(A.c)((function(e){var t;return null===(t=e.tickets)||void 0===t?void 0:t.isFetchingTickets})),O=Object(A.c)((function(e){return e.tickets.fetchTicketsResult})),m=Object(i.useRef)(null),T=(p.a.Option,c.a.useState({subject:"",description:"",deadline:"",visible:!1})),F=Object(v.a)(T,2),R=F[0],D=F[1],E=function(e,t,n){t(),l({searchedColumn:n,searchText:e[0]})},N=function(e){e(),l(Object(k.a)(Object(k.a)({},r),{},{searchText:""}))},I=[Object(k.a)({title:"Intitul\xe9",dataIndex:"subject",key:"subject",width:"25%",align:"center"},(u="subject",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,c=e.clearFilters;return Object(y.jsxs)("div",{style:{padding:8},children:[Object(y.jsx)(C.a,{ref:function(e){m=e},placeholder:"Search ".concat(u),value:n,onChange:function(e){t([e.target.value])},onPressEnter:function(){return E(n,i,u)},style:{width:188,marginBottom:8,display:"block"}}),Object(y.jsxs)(ge.b,{children:[Object(y.jsx)(P.a,{type:"primary",onClick:function(){return E(n,i,u)},icon:Object(y.jsx)(ve.a,{}),size:"small",style:{width:90},children:"Search"}),Object(y.jsx)(P.a,{onClick:function(){return N(c)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(y.jsx)(ve.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return m.select()}),100)},render:function(e){return r.searchedColumn===u?Object(y.jsx)(Le.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[r.searchText],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Date de cr\xe9ation",dataIndex:"openAt",key:"openAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Deadline",dataIndex:"deadline",key:"deadline",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Etat",dataIndex:"status",key:"status",align:"center",width:"25%",filters:[{text:"Nouveau",value:"Nouveau"},{text:"en cours",value:"en cours"},{text:"termin\xe9",value:"termine"}],filterMultiple:!1,onFilter:function(e,t){return 0===t.status.indexOf(e)},filterSearch:!0,render:function(e){return Object(y.jsx)(oe.a,{color:{Nouveau:"blue","en cours":"orange",termine:"green"}[e],children:e.toUpperCase()})}},{title:"plus",align:"center",width:"25%",render:function(e){return"termine"===e.status?Object(y.jsx)("div",{children:Object(y.jsxs)(P.a,{icon:Object(y.jsx)(Te.a,{}),size:"large",onClick:function(){return n.push("/dashboard/tickets/termine/"+e._id)},children:[" ","Afficher plus"]})}):"---"}}];return Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:Object(y.jsxs)(w.a,{span:24,children:[Object(y.jsxs)(Ke,{style:{margin:"0 16px"},children:[Object(y.jsxs)("div",{style:{background:"white",maxHeight:"100%",padding:24,margin:"8px 0px"},children:[Object(y.jsx)("h1",{style:{fontSize:"35px"},children:" La liste des tickets"}),Object(y.jsx)(P.a,{type:"primary",icon:Object(y.jsx)(Se.a,{}),onClick:function(){return D(Object(k.a)(Object(k.a)({},R),{},{visible:!0}))},children:"Cr\xe9er un ticket"}),Object(y.jsxs)("span",{className:"tab",children:[" ",Object(y.jsxs)(P.a,{type:"primary",icon:Object(y.jsx)(we.a,{}),onClick:function(){var e;null===O||void 0===O||null===(e=O.result)||void 0===e||e.map((function(e){return!1===e.downloaded&&"termine"===e.status&&xe.a.info({message:e.subject,description:'Le ticket " '+e.subject+'"a \xe9t\xe9 termin\xe9, cliquez ici pour obtenir les d\xe9tails du ticket',placement:"topRight",duration:5,onClick:function(){n.push("/dashboard/tickets/termine/"+e._id)}})}))},children:["V\xe9rifier les notifications"," "]})]}),Object(y.jsx)(x.Switch,{style:{margin:"auto",color:"red"},onClick:function(e){l(Object(k.a)(Object(k.a)({},r),{},{switcher:e}))},checkedChildren:"Apr\xe8s",unCheckedChildren:"Avant",defaultunChecked:!0})]}),(null===R||void 0===R?void 0:R.visible)&&Object(y.jsxs)(ke.a,{title:"Nouveau ticket",centered:!0,visible:null===R||void 0===R?void 0:R.visible,onOk:function(){if(""===R.subjet||""===R.description||""===R.deadline)Oe.b.error("Merci de compl\xe9ter tous les champs!");else{var e=R;delete e.visible,d((t=Object(k.a)({},e),function(){var e=Object(Re.a)(Ce.a.mark((function e(n,i){var c,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"post",url:g,headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:t},e.next=3,h()(c).then((function(e){Oe.b.success("Ticket added successfully"),n(ze())})).catch((function(e){Oe.b.error("Error while adding the ticket ")}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),D(Object(k.a)(Object(k.a)({},R),{},{visible:!1}))}var t},onCancel:function(){return D(Object(k.a)(Object(k.a)({},R),{},{visible:!1}))},width:600,okText:"Cr\xe9er un ticket",cancelText:"Annuler la cr\xe9ation",children:[Object(y.jsxs)(S.a,{children:[Object(y.jsx)(w.a,{span:8,children:Object(y.jsx)(_e.a,{type:"secondary",style:{fontSize:"20px"},children:"L'intitul\xe9:"})}),Object(y.jsxs)(w.a,{span:16,children:[" ",Object(y.jsx)(C.a,{onChange:function(e){return D(Object(k.a)(Object(k.a)({},R),{},{subject:e.target.value}))},value:R.subject,style:{width:"369px",height:30,marginBottom:8,marginTop:8,fontSize:"15px",display:"block"}})]})]}),Object(y.jsxs)(S.a,{children:[Object(y.jsx)(w.a,{span:8,children:Object(y.jsx)(_e.a,{type:"secondary",style:{fontSize:"20px"},children:"D\xe9scription:"})}),Object(y.jsxs)(w.a,{span:16,children:[" ",Object(y.jsx)(Ze,{rows:4,onChange:function(e){return D(Object(k.a)(Object(k.a)({},R),{},{description:e.target.value}))},value:R.description})]})]}),Object(y.jsxs)(S.a,{children:[Object(y.jsx)(w.a,{span:8,style:{marginTop:8},children:Object(y.jsx)(_e.a,{type:"secondary",style:{fontSize:"20px"},children:"Deadline:"})}),Object(y.jsxs)(w.a,{span:16,children:[" ",Object(y.jsx)(f.a,{style:{marginTop:8},onChange:function(e){D(Object(k.a)(Object(k.a)({},R),{},{deadline:e}))}})]})]})]}),Object(y.jsx)(S.a,{style:{background:"#fff"},children:Object(y.jsx)(ye.a,{pagination:!1,rowKey:"_id",tableLayout:"fixed",columns:I,dataSource:null===O||void 0===O?void 0:O.result,loading:j,style:{padding:24,minHeight:"100%"}})})]}),Object(y.jsx)(pe.Footer,{style:{marginTop:10,background:"#fff"},children:Object(y.jsxs)(S.a,{justify:"end",children:[Object(y.jsxs)(w.a,{children:["Nombre total de tickets: ",null===O||void 0===O||null===(e=O.result)||void 0===e?void 0:e.length]}),console.log("length",null===O||void 0===O||null===(t=O.result)||void 0===t?void 0:t.length)]})})]})})})}),Ve=n(1424),We=Object(L.b)({name:"Tickets",initialState:{fetchTicketsResult:null,fetchTicketsError:null,isFetchingNewTickets:!1,updateTicket:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setPathname:function(e,t){e.pathname=t.payload},setNewTicketsResult:function(e,t){e.fetchTicketsResult=t.payload,t.payload.nbreOfDocs&&(e.nbreOfDocs=t.payload.nbreOfDocs),e.isFetchingNewTickets=!1},setNewTicketsError:function(e,t){e.fetchTicketsError=t.payload,e.isFetchingNewTickets=!1},setFetchingNewTickets:function(e,t){t.payload&&(e.fetchTicketsError=null,e.fetchTicketsResult=null),e.isFetchingNewTickets=t.payload},SetUpdateTicketStatus:function(e,t){e.updateTicketStatus=!0},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),qe=We.actions,Je=(qe.setPathname,qe.setNewTicketsResult),Ge=qe.setNewTicketsError,Ye=qe.setFetchingNewTickets,$e=qe.SetUpdateTicketStatus,Qe=(qe.setFilters,qe.setPage,function(e){return function(t,n){var i={method:"get",url:"/api/v1/tickets/newTickets",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return t(Ye(!0)),h()(i).then((function(e){t(Je(e.data))})).catch((function(e){t(Ge(e.message))})).data}}),Xe=We.reducer,et=(C.a.TextArea,function(e){var t=e.children,n=e.extra;return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("div",{className:"main",children:t}),Object(y.jsx)("div",{className:"extra",children:n})]})}),tt=(f.a.RangePicker,function(){Object(Ue.useHistory)();var e=Object(i.useState)({}),t=Object(v.a)(e,2),n=t[0],a=t[1],s=c.a.useEffect,r=Object(A.b)();s((function(){r(Qe())}),[]);var l,o=Object(A.c)((function(e){var t;return null===(t=e.newTickets)||void 0===t?void 0:t.isFetchingTickets})),d=Object(A.c)((function(e){return e.newTickets.fetchTicketsResult})),u=Object(i.useRef)(null),j=(p.a.Option,c.a.useState({subject:"",description:"",deadline:"",visible:!1})),f=Object(v.a)(j,2),g=(f[0],f[1],function(e,t,n){t(),a({searchedColumn:n,searchText:e[0]})}),m=function(e){e(),a(Object(k.a)(Object(k.a)({},n),{},{searchText:""}))},T=[Object(k.a)({title:"Intitul\xe9",dataIndex:"subject",key:"subject",width:"25%",align:"center"},(l="subject",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,c=e.clearFilters;return Object(y.jsxs)("div",{style:{padding:8},children:[Object(y.jsx)(C.a,{ref:function(e){u=e},placeholder:"Search ".concat(l),value:n,onChange:function(e){t(e.target.value?e.target.value:"")},onPressEnter:function(){return g(n,i,l)},style:{width:188,marginBottom:8,display:"block"}}),Object(y.jsxs)(ge.b,{children:[Object(y.jsx)(P.a,{type:"primary",onClick:function(){return g(n,i,l)},icon:Object(y.jsx)(ve.a,{}),size:"small",style:{width:90},children:"Search"}),Object(y.jsx)(P.a,{onClick:function(){return m(c)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(y.jsx)(ve.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return u.select()}),100)},render:function(e){return n.searchedColumn===l?Object(y.jsx)(Le.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n.searchText],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Date de cr\xe9ation",dataIndex:"openAt",key:"openAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Deadline",dataIndex:"deadline",key:"deadline",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Actions",width:"25%",align:"center",dataIndex:"_id",key:"_id",render:function(e){return Object(y.jsx)(Ve.a,{placement:"topLeft",title:"Vous voulez vraiment prendre ce ticket !",onConfirm:function(){var t;r((t={_id:e},function(e,n){var i={method:"patch",url:O+t._id,headers:{"Content-Type":"application/json",Authorization:localStorage.token}};return h()(i).then((function(t){Oe.b.success("updated successfully"),e($e())})).catch((function(e){Oe.b.error("error while updating status")})).data}))},okText:"OUI",cancelText:"NON",style:{width:"500px",height:"100px",borderRadius:"20px",backgroundColor:"#10101088",backdropFilter:"blur(0.7rem)"},children:Object(y.jsx)(P.a,{type:"link",children:"PRENDRE"})})}}];return Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:Object(y.jsxs)(w.a,{span:24,children:[Object(y.jsxs)(et,{style:{margin:"0 16px"},children:[Object(y.jsxs)("div",{style:{background:"white",maxHeight:"100%",padding:24,margin:"8px 0px"},children:[Object(y.jsxs)("h1",{style:{fontSize:"35px"},children:[" ","La liste des nouveaux tickets"]}),Object(y.jsx)(x.Switch,{style:{margin:"auto",color:"red"},onClick:function(e){a(Object(k.a)(Object(k.a)({},n),{},{switcher:e}))},checkedChildren:"Apr\xe8s",unCheckedChildren:"Avant",defaultunChecked:!0})]}),Object(y.jsx)(S.a,{style:{background:"#fff"},children:Object(y.jsx)(ye.a,{pagination:!1,rowKey:"_id",tableLayout:"fixed",columns:T,dataSource:null===d||void 0===d?void 0:d.result,loading:o,style:{padding:24,minHeight:"100%"}})})]}),Object(y.jsx)(pe.Footer,{style:{marginTop:10,background:"#fff"},children:Object(y.jsxs)(S.a,{justify:"end",children:[Object(y.jsxs)(w.a,{children:["Nombre total de tickets: ",null===d||void 0===d?void 0:d.result.length]}),console.log("length",null===d||void 0===d?void 0:d.result.length)]})})]})})})}),nt=Object(L.b)({name:"Tickets",initialState:{fetchTicketsResult:null,fetchTicketsError:null,isFetchingEncoursTickets:!1,updateTicket:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setPathname:function(e,t){e.pathname=t.payload},setEncoursTicketsResult:function(e,t){e.fetchTicketsResult=t.payload,t.payload.nbreOfDocs&&(e.nbreOfDocs=t.payload.nbreOfDocs),e.isFetchingEncoursTickets=!1},setEncoursTicketsError:function(e,t){e.fetchTicketsError=t.payload,e.isFetchingEncoursTickets=!1},setFetchingEncoursTickets:function(e,t){t.payload&&(e.fetchTicketsError=null,e.fetchTicketsResult=null),e.isFetchingEncoursTickets=t.payload},SetUpdateTicketStatus:function(e,t){e.updateTicketStatus=!0},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),it=nt.actions,ct=(it.setPathname,it.setEncoursTicketsResult),at=it.setEncoursTicketsError,st=it.setFetchingEncoursTickets,rt=(it.SetUpdateTicketStatus,it.setFilters,it.setPage,function(e){return function(t,n){var i={method:"get",url:"/api/v1/tickets/encours/",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return t(st(!0)),h()(i).then((function(e){t(ct(e.data))})).catch((function(e){t(at(e.message))})).data}}),lt=nt.reducer,ot=(C.a.TextArea,function(e){var t=e.children,n=e.extra;return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("div",{className:"main",children:t}),Object(y.jsx)("div",{className:"extra",children:n})]})}),dt=(f.a.RangePicker,function(){var e=Object(Ue.useHistory)(),t=Object(i.useState)({}),n=Object(v.a)(t,2),a=n[0],s=n[1],r=c.a.useEffect,l=Object(A.b)();r((function(){l(rt())}),[]);var o,d=Object(A.c)((function(e){var t;return null===(t=e.encoursTickets)||void 0===t?void 0:t.isFetchingTickets})),u=Object(A.c)((function(e){return e.encoursTickets.fetchTicketsResult})),h=Object(i.useRef)(null),j=(p.a.Option,c.a.useState({subject:"",description:"",deadline:"",visible:!1})),f=Object(v.a)(j,2),g=(f[0],f[1],function(e,t,n){t(),s({searchedColumn:n,searchText:e[0]})}),O=function(e){e(),s(Object(k.a)(Object(k.a)({},a),{},{searchText:""}))},m=[Object(k.a)({title:"Intitul\xe9",dataIndex:"subject",key:"subject",width:"25%",align:"center"},(o="subject",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,c=e.clearFilters;return Object(y.jsxs)("div",{style:{padding:8},children:[Object(y.jsx)(C.a,{ref:function(e){h=e},placeholder:"Search ".concat(o),value:n,onChange:function(e){t(e.target.value?e.target.value:"")},onPressEnter:function(){return g(n,i,o)},style:{width:188,marginBottom:8,display:"block"}}),Object(y.jsxs)(ge.b,{children:[Object(y.jsx)(P.a,{type:"primary",onClick:function(){return g(n,i,o)},icon:Object(y.jsx)(ve.a,{}),size:"small",style:{width:90},children:"Search"}),Object(y.jsx)(P.a,{onClick:function(){return O(c)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(y.jsx)(ve.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return h.select()}),100)},render:function(e){return a.searchedColumn===o?Object(y.jsx)(Le.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.searchText],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Date de cr\xe9ation",dataIndex:"openAt",key:"openAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Deadline",dataIndex:"deadline",key:"deadline",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Actions",width:"25%",align:"center",dataIndex:"_id",key:"_id",render:function(t){return Object(y.jsx)(P.a,{type:"link",icon:Object(y.jsx)(Te.a,{}),onClick:function(n){return e.push("/dashboard/tickets/encours/"+t)},children:"MANAGE"})}}];return Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:Object(y.jsxs)(w.a,{span:24,children:[Object(y.jsxs)(ot,{style:{margin:"0 16px"},children:[Object(y.jsxs)("div",{style:{background:"white",maxHeight:"100%",padding:24,margin:"8px 0px"},children:[Object(y.jsxs)("h1",{style:{fontSize:"35px"},children:[" ","La liste des tickets en cours de traitement"]}),Object(y.jsx)(x.Switch,{style:{margin:"auto",color:"red"},onClick:function(e){s(Object(k.a)(Object(k.a)({},a),{},{switcher:e}))},checkedChildren:"Apr\xe8s",unCheckedChildren:"Avant",defaultunChecked:!0})]}),Object(y.jsx)(S.a,{style:{background:"#fff"},children:Object(y.jsx)(ye.a,{pagination:!1,rowKey:"_id",tableLayout:"fixed",columns:m,dataSource:null===u||void 0===u?void 0:u.result,loading:d,style:{padding:24,minHeight:"100%"}})})]}),Object(y.jsx)(pe.Footer,{style:{marginTop:10,background:"#fff"},children:Object(y.jsxs)(S.a,{justify:"end",children:[Object(y.jsxs)(w.a,{children:["Nombre total de tickets: ",null===u||void 0===u?void 0:u.result.length]}),console.log("length",null===u||void 0===u?void 0:u.result.length)]})})]})})})}),ut=Object(L.b)({name:"Tickets",initialState:{fetchTicketsResult:null,fetchTicketsError:null,isFetchingNewTickets:!1,updateTicket:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setPathname:function(e,t){e.pathname=t.payload},setNewTicketsResult:function(e,t){e.fetchTicketsResult=t.payload,t.payload.nbreOfDocs&&(e.nbreOfDocs=t.payload.nbreOfDocs),e.isFetchingNewTickets=!1},setNewTicketsError:function(e,t){e.fetchTicketsError=t.payload,e.isFetchingNewTickets=!1},setFetchingNewTickets:function(e,t){t.payload&&(e.fetchTicketsError=null,e.fetchTicketsResult=null),e.isFetchingNewTickets=t.payload},SetUpdateTicketStatus:function(e,t){e.updateTicketStatus=!0},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),ht=ut.actions,jt=(ht.setPathname,ht.setNewTicketsResult),bt=ht.setNewTicketsError,ft=ht.setFetchingNewTickets,pt=(ht.SetUpdateTicketStatus,ht.setFilters,ht.setPage,ut.reducer),gt=(C.a.TextArea,function(e){var t=e.children,n=e.extra;return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("div",{className:"main",children:t}),Object(y.jsx)("div",{className:"extra",children:n})]})}),Ot=(f.a.RangePicker,function(){Object(Ue.useHistory)();var e=Object(i.useState)({}),t=Object(v.a)(e,2),n=t[0],a=t[1],s=c.a.useEffect,r=Object(A.b)();s((function(){var e;r((function(t,n){var i={method:"get",url:"/api/v1/tickets/termine/",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return t(ft(!0)),h()(i).then((function(e){t(jt(e.data))})).catch((function(e){t(bt(e.message))})).data}))}),[]);var l,o=Object(A.c)((function(e){var t;return null===(t=e.termineTickets)||void 0===t?void 0:t.isFetchingTickets})),d=Object(A.c)((function(e){return e.termineTickets.fetchTicketsResult})),u=Object(i.useRef)(null),j=(p.a.Option,c.a.useState({subject:"",description:"",deadline:"",visible:!1})),f=Object(v.a)(j,2),g=(f[0],f[1],function(e,t,n){t(),a({searchedColumn:n,searchText:e[0]})}),O=function(e){e(),a(Object(k.a)(Object(k.a)({},n),{},{searchText:""}))},m=[Object(k.a)({title:"Intitul\xe9",dataIndex:"subject",key:"subject",width:"25%",align:"center"},(l="subject",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,c=e.clearFilters;return Object(y.jsxs)("div",{style:{padding:8},children:[Object(y.jsx)(C.a,{ref:function(e){u=e},placeholder:"Search ".concat(l),value:n,onChange:function(e){t(e.target.value?e.target.value:"")},onPressEnter:function(){return g(n,i,l)},style:{width:188,marginBottom:8,display:"block"}}),Object(y.jsxs)(ge.b,{children:[Object(y.jsx)(P.a,{type:"primary",onClick:function(){return g(n,i,l)},icon:Object(y.jsx)(ve.a,{}),size:"small",style:{width:90},children:"Search"}),Object(y.jsx)(P.a,{onClick:function(){return O(c)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(y.jsx)(ve.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return u.select()}),100)},render:function(e){return n.searchedColumn===l?Object(y.jsx)(Le.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[n.searchText],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Date de cr\xe9ation",dataIndex:"openAt",key:"openAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Date de fin",dataIndex:"endAt",key:"endAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Deadline",dataIndex:"deadline",key:"deadline",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}}];return Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:Object(y.jsxs)(w.a,{span:24,children:[Object(y.jsxs)(gt,{style:{margin:"0 16px"},children:[Object(y.jsxs)("div",{style:{background:"white",maxHeight:"100%",padding:24,margin:"8px 0px"},children:[Object(y.jsxs)("h1",{style:{fontSize:"35px"},children:[" ","La liste des tickets termin\xe9s"]}),Object(y.jsx)(x.Switch,{style:{margin:"auto",color:"red"},onClick:function(e){a(Object(k.a)(Object(k.a)({},n),{},{switcher:e}))},checkedChildren:"Apr\xe8s",unCheckedChildren:"Avant",defaultunChecked:!0})]}),Object(y.jsx)(S.a,{style:{background:"#fff"},children:Object(y.jsx)(ye.a,{pagination:!1,rowKey:"_id",tableLayout:"fixed",columns:m,dataSource:null===d||void 0===d?void 0:d.result,loading:o,style:{padding:24,minHeight:"100%"}})})]}),Object(y.jsx)(pe.Footer,{style:{marginTop:10,background:"#fff"},children:Object(y.jsxs)(S.a,{justify:"end",children:[Object(y.jsxs)(w.a,{children:["Nombre total de tickets: ",null===d||void 0===d?void 0:d.result.length]}),console.log("length",null===d||void 0===d?void 0:d.result.length)]})})]})})})}),xt=n(1429),yt=n(1441),mt=Object(L.b)({name:"singleTicket",initialState:{fetchSingleTicketResult:null,fetchTicketsError:null,isFetchingNewTickets:!1,fetchUploadZipFileResult:null,fetchUploadZipFileError:null,isFetchingUploadZipFile:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setSingleTicketResult:function(e,t){e.fetchSingleTicketResult=t.payload,e.isFetchingSingleTicket=!1},setSingleTicketError:function(e,t){e.fetchSingleTicketError=t.payload,e.isFetchingSingleTicket=!1},setFetchingSingleTicket:function(e,t){t.payload&&(e.fetchSingleTicketError=null,e.fetchSingleTicketResult=null),e.isFetchingSingleTicket=t.payload},setUploadZipFileResult:function(e,t){e.fetchUploadZipFileResult=t.payload,e.isFetchingUploadZipFile=!1},setUploadZipFileError:function(e,t){e.fetchUploadZipFileError=t.payload,e.isFetchingUploadZipFile=!1},setFetchingUploadZipFile:function(e,t){t.payload&&(e.fetchUploadZipFileResult=null,e.fetchUploadZipFileError=null),e.isFetchingUploadZipFile=t.payload},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),kt=mt.actions,vt=kt.setSingleTicketResult,Tt=kt.setSingleTicketError,St=kt.setFetchingSingleTicket,wt=kt.setUploadZipFileResult,Ft=kt.setUploadZipFileError,Ct=kt.setFetchingUploadZipFile,Rt=(kt.setFilters,kt.setPage,function(e){return function(t,n){var i={method:"get",url:"/api/v1/tickets/single/"+e._id,headers:{"Content-Type":"application/json",Authorization:localStorage.token}};console.log("start fetching ...",e),t(St(!0));var c=h()(i).then((function(e){t(vt(e.data)),console.log("single ticket",e.data),Oe.b.success("Ticket fetched successfully")})).catch((function(e){t(Tt(e.message)),Oe.b.error("Error while fetching single ticket ")}));return console.log("end fetching ..."),console.log(c),c.data}}),Dt=mt.reducer,Et=n(1434),Pt=C.a.TextArea,Nt=(f.a.RangePicker,function(){var e,t,n,a,s=Object(Ue.useParams)()._id,r=Object(Ue.useHistory)(),l=Object(i.useState)({}),o=Object(v.a)(l,2),d=o[0],u=o[1],j=c.a.useEffect,f=Object(A.b)();j((function(){f(Rt({_id:s}))}),[]);Object(A.c)((function(e){var t;return null===(t=e.singleTicket)||void 0===t?void 0:t.isFetchingSingleTicket}));var p=Object(A.c)((function(e){return e.singleTicket.fetchSingleTicketResult})),g=Object(A.c)((function(e){return e.singleTicket.fetchUploadZipFileResult})),O=c.a.useState({subject:"",description:"",deadline:"",visible:!1}),x=Object(v.a)(O,2),m=(x[0],x[1],c.a.useState({notes:"",disabled:!1})),T=Object(v.a)(m,2),F=T[0],C=T[1],R={onRemove:function(e){var t=d.fileList.indexOf(e),n=d.fileList.slice();n.splice(t,1),u(Object(k.a)(Object(k.a)({},d),{},{fileList:n}))},beforeUpload:function(e){return f(function(e){return function(t,n){var i=new FormData;return i.append("upload",e),localStorage.token,t(Ct(!0)),h.a.post("/api/v1/upload/upload",i,{headers:{"Content-Type":"multipart/form-data",Authorization:localStorage.token}}).then((function(e){t(wt(e.data.path)),Oe.b.success("Votre fichier zip a \xe9t\xe9 upload\xe9 avec succ\xe8s !")})).catch((function(e){t(Ft(e.message)),console.log("slice error")})).data}}(e)),!1},fileList:d.fileList};return Object(y.jsxs)("div",{children:[Object(y.jsxs)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:[Object(y.jsx)(P.a,{type:"link",onClick:r.goBack,children:"En cours /"}),Object(y.jsx)(P.a,{type:"text",children:"Ticket"}),Object(y.jsx)(w.a,{span:10,children:Object(y.jsxs)(Et.b,{layout:"horizontal",bordered:!0,style:{marginTop:"10%"},column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(y.jsx)(Et.b.Item,{label:"Intitul\xe9",children:null===p||void 0===p||null===(e=p.result[0])||void 0===e?void 0:e.subject}),Object(y.jsx)(Et.b.Item,{label:"D\xe9scription",children:null===p||void 0===p||null===(t=p.result[0])||void 0===t?void 0:t.description}),Object(y.jsx)(Et.b.Item,{label:"Date de cr\xe9ation",children:Object(y.jsx)(oe.a,{color:"blue",children:b()(null===p||void 0===p||null===(n=p.result[0])||void 0===n?void 0:n.openAt).format("DD/MM/yyyy")})}),Object(y.jsx)(Et.b.Item,{label:"Deadline",children:Object(y.jsx)(oe.a,{color:"red",children:b()(null===p||void 0===p||null===(a=p.result[0])||void 0===a?void 0:a.deadline).format("DD/MM/yyyy")})})]})}),!F.disabled&&Object(y.jsxs)(w.a,{span:8,style:{marginTop:"3%"},children:[Object(y.jsx)(_e.a,{type:"secondary",style:{fontSize:"20px"},children:"Ajouter des remarques:"})," ",Object(y.jsx)(Pt,{rows:4,onChange:function(e){return C(Object(k.a)(Object(k.a)({},F),{},{notes:e.target.value}))},value:F.notes}),Object(y.jsxs)("span",{className:"tab",style:{marginTop:"8%"},children:[Object(y.jsx)(xt.a,Object(k.a)(Object(k.a)({},R),{},{children:Object(y.jsx)("div",{className:"file file--upload",style:{border:"1px ridge green",borderRadius:"4px",backgroundColor:"#93edb6",padding:"20px"},children:Object(y.jsxs)("label",{for:"input-file",children:[Object(y.jsx)(yt.a,{}),Object(y.jsx)("span",{className:"tab",children:" Ratacher le fichier .zip"})]})})})),g&&Object(y.jsx)(D.a,{message:"Votre fichier zip a \xe9t\xe9 upload\xe9 avec succ\xe8s !",type:"success",description:"le nouveau nom du fichier est: "+g,showIcon:!0,closable:!0})]})]})]}),Object(y.jsxs)(S.a,{style:{marginTop:"10%"},children:[Object(y.jsx)(w.a,{span:6}),Object(y.jsxs)(w.a,{span:6,children:[" ",Object(y.jsx)(P.a,{type:"primary",size:"large",onClick:function(){var e;F.notes&&g?(C(Object(k.a)(Object(k.a)({},F),{},{disabled:!0})),console.log("notes.disabled",F.disabled),f((e={_id:s,notes:F.notes,path:g},function(t,n){var i={method:"post",url:"/api/v1/tickets/encours/close",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return console.log("close data",e),h()(i).then((function(e){Oe.b.success("Ticket termin\xe9 avec succes")})).catch((function(e){Oe.b.error("error while ending ticket")})).data}))):Oe.b.error("Veuillez remplir tous les champs ")},disabled:F.disabled,children:"Valider le fichier et terminer le ticket"})]}),Object(y.jsxs)(w.a,{span:6,children:[" ",Object(y.jsx)(P.a,{size:"large",onClick:function(){return r.push("/dashboard/tickets/termine")},type:"link",disabled:!F.disabled,children:"Consulter vos tickets termin\xe9s"})]}),Object(y.jsx)(w.a,{span:6})]})]})}),It=Object(L.b)({name:"singleTicket",initialState:{value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),zt=It.actions,At=(zt.setFilters,zt.setPage,It.reducer,T.a.Link,f.a.RangePicker,function(){var e,t,n,a,s,r,l=Object(Ue.useParams)()._id,o=(Object(Ue.useHistory)(),Object(i.useState)({})),d=Object(v.a)(o,2),u=(d[0],d[1],c.a.useEffect),j=Object(A.b)();u((function(){j(Rt({_id:l}))}),[]);Object(A.c)((function(e){var t;return null===(t=e.singleTicket)||void 0===t?void 0:t.isFetchingSingleTicket}));var f=Object(A.c)((function(e){return e.singleTicket.fetchSingleTicketResult})),p=(Object(A.c)((function(e){return e.singleTicket.fetchUploadZipFileResult})),c.a.useState({subject:"",description:"",deadline:"",visible:!1})),g=Object(v.a)(p,2),O=(g[0],g[1],c.a.useState({notes:"",disabled:!1})),x=Object(v.a)(O,2);x[0],x[1];return Object(y.jsx)("div",{children:Object(y.jsxs)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:[Object(y.jsx)(P.a,{type:"link",children:"termin\xe9s /"}),Object(y.jsx)(P.a,{type:"text",children:"Ticket"}),Object(y.jsx)(w.a,{offset:2,span:16,children:Object(y.jsxs)(Et.b,{layout:"horizontal",bordered:!0,style:{marginTop:"10%"},column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[Object(y.jsx)(Et.b.Item,{label:"Intitul\xe9",children:null===f||void 0===f||null===(e=f.result[0])||void 0===e?void 0:e.subject}),Object(y.jsx)(Et.b.Item,{label:"D\xe9scription",children:null===f||void 0===f||null===(t=f.result[0])||void 0===t?void 0:t.description}),Object(y.jsx)(Et.b.Item,{label:"Date de cr\xe9ation",children:Object(y.jsx)(oe.a,{color:"blue",children:b()(null===f||void 0===f||null===(n=f.result[0])||void 0===n?void 0:n.openAt).format("DD/MM/yyyy")})}),Object(y.jsx)(Et.b.Item,{label:"Deadline",children:Object(y.jsx)(oe.a,{color:"red",children:b()(null===f||void 0===f||null===(a=f.result[0])||void 0===a?void 0:a.deadline).format("DD/MM/yyyy")})}),Object(y.jsx)(Et.b.Item,{label:"Termin\xe9 le",children:Object(y.jsx)(oe.a,{color:"green",children:b()(null===f||void 0===f||null===(s=f.result[0])||void 0===s?void 0:s.endAt).format("DD/MM/yyyy")})}),Object(y.jsx)(Et.b.Item,{label:"Remarques",children:null===f||void 0===f||null===(r=f.result[0])||void 0===r?void 0:r.notes}),Object(y.jsx)(Et.b.Item,{label:"Les donn\xe9es collect\xe9es",children:Object(y.jsx)(P.a,{size:"large",type:"link",onClick:function(){var e,t;j((t={_id:l},function(e,n){var i={method:"patch",url:"/api/v1/tickets/termine/"+t._id,headers:{"Content-Type":"application/json",Authorization:localStorage.token}};return console.log("jajajajaaj",t),h()(i).then((function(e){Oe.b.success("downloaded updated avec succes")})).catch((function(e){Oe.b.error("error while updating downloaded")})).data})),window.open("/download/"+(null===f||void 0===f||null===(e=f.result[0])||void 0===e?void 0:e.zipFile))},children:"Cliquez ici pour t\xe9l\xe9charger le fichier.Zip"})})]})})]})})}),Mt=Object(L.b)({name:"Tickets",initialState:{fetchTicketsResult:null,fetchTicketsError:null,isFetchingTickets:!1,value:2,pathname:"/",nbreOfDocs:0,filters:null,page:1},reducers:{setPathname:function(e,t){e.pathname=t.payload},setTicketsResult:function(e,t){e.fetchTicketsResult=t.payload,t.payload.nbreOfDocs&&(e.nbreOfDocs=t.payload.nbreOfDocs),e.isFetchingTickets=!1},setTicketsError:function(e,t){e.fetchTicketsError=t.payload,e.isFetchingTickets=!1},setFetchingTickets:function(e,t){t.payload&&(e.fetchTicketsError=null,e.fetchTicketsResult=null),e.isFetchingTickets=t.payload},setFilters:function(e,t){e.filters=t.payload},setPage:function(e,t){e.page=t.payload}}}),Lt=Mt.actions,Ut=(Lt.setPathname,Lt.setTicketsResult),Ht=Lt.setTicketsError,_t=Lt.setFetchingTickets,Zt=(Lt.setFilters,Lt.setPage,function(e){return function(t,n){var i={method:"get",url:"/api/v1/tickets/archived",headers:{"Content-Type":"application/json",Authorization:localStorage.token},data:e};return t(_t(!0)),h()(i).then((function(e){t(Ut(e.data))})).catch((function(e){t(Ht(e.message))})).data}}),Kt=Mt.reducer,Bt=(C.a.TextArea,function(e){var t=e.children,n=e.extra;return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("div",{className:"main",children:t}),Object(y.jsx)("div",{className:"extra",children:n})]})}),Vt=(f.a.RangePicker,function(){var e=Object(Ue.useHistory)(),t=Object(i.useState)({}),n=Object(v.a)(t,2),a=n[0],s=n[1],r=c.a.useEffect,l=Object(A.b)();r((function(){l(Zt())}),[]);var o=Object(A.c)((function(e){var t;return null===(t=e.ticketsArchived)||void 0===t?void 0:t.isFetchingTickets})),d=Object(A.c)((function(e){return e.ticketsArchived.fetchTicketsResult}));console.log("fetchTicketsResult",d);var u,h=Object(i.useRef)(null),j=(p.a.Option,c.a.useState({subject:"",description:"",deadline:"",visible:!1})),f=Object(v.a)(j,2),g=(f[0],f[1],function(e,t,n){t(),s({searchedColumn:n,searchText:e[0]})}),O=function(e){e(),s(Object(k.a)(Object(k.a)({},a),{},{searchText:""}))},m=[Object(k.a)({title:"Intitul\xe9",dataIndex:"subject",key:"subject",width:"25%",align:"center"},(u="subject",{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,i=e.confirm,c=e.clearFilters;return Object(y.jsxs)("div",{style:{padding:8},children:[Object(y.jsx)(C.a,{ref:function(e){h=e},placeholder:"Search ".concat(u),value:n,onChange:function(e){t([e.target.value])},onPressEnter:function(){return g(n,i,u)},style:{width:188,marginBottom:8,display:"block"}}),Object(y.jsxs)(ge.b,{children:[Object(y.jsx)(P.a,{type:"primary",onClick:function(){return g(n,i,u)},icon:Object(y.jsx)(ve.a,{}),size:"small",style:{width:90},children:"Search"}),Object(y.jsx)(P.a,{onClick:function(){return O(c)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(y.jsx)(ve.a,{style:{color:e?"#1890ff":void 0}})},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return h.select()}),100)},render:function(e){return a.searchedColumn===u?Object(y.jsx)(Le.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.searchText],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Date de cr\xe9ation",dataIndex:"openAt",key:"openAt",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Deadline",dataIndex:"deadline",key:"deadline",width:"25%",align:"center",render:function(e){return b()(e).format("DD/MM/yyyy")}},{title:"Etat",dataIndex:"status",key:"status",align:"center",width:"25%",render:function(e){return Object(y.jsx)(oe.a,{color:"grey",children:"archiv\xe9".toUpperCase()})}},{title:"plus",align:"center",width:"25%",render:function(t){return"termine"===t.status?Object(y.jsx)("div",{children:Object(y.jsxs)(P.a,{icon:Object(y.jsx)(Te.a,{}),size:"large",onClick:function(){return e.push("/dashboard/tickets/termine/"+t._id)},children:[" ","Afficher plus"]})}):"---"}}];return Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{gutter:[25,5],style:{padding:10,marginTop:0},children:Object(y.jsxs)(w.a,{span:24,children:[Object(y.jsxs)(Bt,{style:{margin:"0 16px"},children:[Object(y.jsxs)("div",{style:{background:"white",maxHeight:"100%",padding:24,margin:"8px 0px"},children:[Object(y.jsxs)("h1",{style:{fontSize:"35px"},children:[" ","La liste des tickets archiv\xe9s"]}),Object(y.jsx)(x.Switch,{style:{margin:"auto",color:"red"},onClick:function(e){s(Object(k.a)(Object(k.a)({},a),{},{switcher:e}))},checkedChildren:"Apr\xe8s",unCheckedChildren:"Avant",defaultunChecked:!0})]}),Object(y.jsx)(S.a,{style:{background:"#fff"},children:Object(y.jsx)(ye.a,{pagination:!1,rowKey:"_id",tableLayout:"fixed",columns:m,dataSource:null===d||void 0===d?void 0:d.result,loading:o,style:{padding:24,minHeight:"100%"}})})]}),Object(y.jsx)(pe.Footer,{style:{marginTop:10,background:"#fff"},children:Object(y.jsxs)(S.a,{justify:"end",children:[Object(y.jsxs)(w.a,{children:["Nombre total de tickets: ",null===d||void 0===d?void 0:d.result.length]}),console.log("lenth",null===d||void 0===d?void 0:d.result.length)]})})]})})})}),Wt=ce.a.Header,qt=(ce.a.Footer,ce.a.Sider),Jt=T.a.Text,Gt=(ae.a.SubMenu,function(e){Object(ie.a)(e);var t=Object(x.useHistory)(),n=c.a.useState({collapsed:!1,current:""}),i=Object(v.a)(n,2),a=i[0],s=i[1],r=Object(A.b)(),l=Object(A.c)((function(e){var t;return null===(t=e.dashboard)||void 0===t?void 0:t.isFetchingProfile})),o=Object(A.c)((function(e){var t;return null===(t=e.dashboard)||void 0===t?void 0:t.fetchProfileResult}));Object(A.c)((function(e){var t;return null===(t=e.dashboard)||void 0===t?void 0:t.fetchProfileError}));console.log("type",null===o||void 0===o?void 0:o.user.type);var d=a.collapsed;(0,c.a.useEffect)((function(){r((function(e,t){var n={method:"get",url:"/api/v1/users/",headers:{Authorization:localStorage.token}};return e(Q(!0)),h()(n).then((function(t){e(Y(t.data)),console.log("user",t.data,localStorage.token)})).catch((function(t){e($(t.message)),console.log("user",t.data)})).data})),r(G(t.location.pathname))}),[localStorage.token]);var u=Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)(S.a,{children:[Object(y.jsxs)(w.a,{children:[" ",Object(y.jsx)("h5",{children:"Nom:"})]}),Object(y.jsxs)(w.a,{children:[Object(y.jsxs)("span",{className:"tab",children:[" ",Object(y.jsx)("h5",{children:null===o||void 0===o?void 0:o.user.name})]})," "]})]}),Object(y.jsx)(le.a,{}),Object(y.jsxs)(S.a,{children:[Object(y.jsxs)(w.a,{children:[" ",Object(y.jsx)("h5",{children:"Email:"})," "]}),Object(y.jsxs)(w.a,{children:[Object(y.jsxs)("span",{className:"tab",children:[" ",Object(y.jsx)("h5",{children:null===o||void 0===o?void 0:o.user.email})]})," "]})]}),Object(y.jsx)(le.a,{}),Object(y.jsx)(S.a,{children:Object(y.jsxs)(w.a,{offset:6,children:[" ","assistantFr"===(null===o||void 0===o?void 0:o.user.type)?Object(y.jsx)(oe.a,{color:"#FFD700",style:{fontSize:"20px"},children:"Assistant FR "}):Object(y.jsx)(oe.a,{color:"#C0C0C0",style:{fontSize:"20px"},children:"Assistant DZ "})]})})]}),Object(y.jsx)(le.a,{}),Object(y.jsxs)(P.a,{block:!0,size:"medium",shape:"round",onClick:function(){localStorage.removeItem("token"),t.push("/signin")},style:{backgroundColor:"#FF0000",color:"white"},children:[Object(y.jsx)(ue.a,{style:{fontSize:"20px"}}),"Logout"]})]}),j=function(e){return Object(ie.a)(e),Object(y.jsx)(de.a,{content:u,trigger:"click",children:Object(y.jsx)("span",{children:Object(y.jsx)(se.a,{dot:!0,children:Object(y.jsx)(re.a,{size:40,icon:Object(y.jsx)(I.a,{})})})})})};return localStorage.token?Object(y.jsxs)(ce.a,{style:{minHeight:"100vh"},children:[Object(y.jsxs)(qt,{collapsible:!0,collapsed:d,onCollapse:function(e){s(Object(k.a)(Object(k.a)({},a),{},{collapsed:e}))},children:[Object(y.jsx)("div",{style:{margin:"16px"},children:d?null:Object(y.jsx)(w.a,{style:{backgroundColor:"#333",height:"34px",borderRadius:"7px"}})}),Object(y.jsxs)(ae.a,{theme:"dark",defaultSelectedKeys:["clients"],mode:"inline",onSelect:function(e){switch(s({current:e.key}),e.key){case"tickets":t.push("/dashboard/tickets");break;case"pending":t.push("/dashboard/tickets/pending");break;case"encours":t.push("/dashboard/tickets/encours");break;case"termine":t.push("/dashboard/tickets/termine");break;case"archive":t.push("/dashboard/tickets/archive")}},style:{overflow:"auto"},selectedKeys:[a.current],children:["assistantFr"===(null===o||void 0===o?void 0:o.user.type)&&Object(y.jsx)(ae.a.Item,{icon:Object(y.jsx)(he.a,{}),children:"Tous les tickets"},"tickets"),"assistantFr"===(null===o||void 0===o?void 0:o.user.type)&&Object(y.jsx)(ae.a.Item,{icon:Object(y.jsx)(je.a,{}),children:"Les tickets archiv\xe9s"},"archive"),"assistantDz"===(null===o||void 0===o?void 0:o.user.type)&&Object(y.jsx)(ae.a.Item,{icon:Object(y.jsx)(be.a,{}),children:"Les tickets disponibles"},"pending"),"assistantDz"===(null===o||void 0===o?void 0:o.user.type)&&Object(y.jsx)(ae.a.Item,{icon:Object(y.jsx)(M.a,{}),children:"Les tickets en cours"},"encours"),"assistantDz"===(null===o||void 0===o?void 0:o.user.type)&&Object(y.jsx)(ae.a.Item,{icon:Object(y.jsx)(fe.a,{}),children:"Les tickets termin\xe9s"},"termine")]})]}),Object(y.jsxs)(ce.a,{className:"site-layout",style:{overflowY:"scroll",maxHeight:"100vh"},children:[Object(y.jsxs)(Wt,{className:"site-layout-background",style:{padding:0},children:[Object(y.jsxs)(S.a,{children:[Object(y.jsx)(w.a,{xs:18,children:Object(y.jsx)(Jt,{})}),Object(y.jsx)(w.a,{xs:6,children:Object(y.jsx)(S.a,{justify:"center",children:Object(y.jsx)(w.a,{span:5,children:Object(y.jsx)(se.a,{count:0,size:60,offset:[0,10],style:{marginLeft:10},children:l?Object(y.jsx)(E.a,{}):Object(y.jsx)(j,{})})})})})]}),Object(y.jsx)(S.a,{justify:"center",children:Object(y.jsx)(w.a,{xs:24,md:12,lg:6,children:Object(y.jsx)(E.a,{spinning:l})})})]}),Object(y.jsx)(pe.Content,{children:Object(y.jsxs)(x.Switch,{children:[Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets",component:Be}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/encours/:_id",component:Nt}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/archive",component:Vt}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/termine/:_id",component:At}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/pending",component:tt}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/encours",component:dt}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/tickets/termine",component:Ot}),Object(y.jsx)(x.Route,{exact:!0,path:"/dashboard/"})]})})]})]}):Object(y.jsx)(x.Redirect,{to:"/signin"})}),Yt=n(149),$t=(n(1414),Object(L.a)({reducer:{signin:W,tickets:Ae,dashboard:X,newTickets:Xe,encoursTickets:lt,singleTicket:Dt,termineTickets:pt,ticketsArchived:Kt}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(y.jsx)(A.a,{store:$t,children:Object(y.jsx)(Yt.a,{children:Object(y.jsxs)(x.Switch,{children:[Object(y.jsx)(x.Route,{exact:!0,path:"/",component:ne}),Object(y.jsx)(x.Route,{path:"/signin",component:ne}),Object(y.jsx)(x.Route,{path:"/dashboard",component:Gt})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},765:function(e,t,n){},766:function(e,t,n){}},[[1416,1,2]]]);
//# sourceMappingURL=main.cc8a1b82.chunk.js.map